-- Bons Visual Enhancer v6 (HD Graphics + Photo Mode) - FIXED CHARACTER LOCK
-- Features: Drag/minimize GUI, day presets (Morning/Noon/Sunset/Night), adjustable DOF,
-- dynamic lighting, enhanced bloom & sun rays, shadows, photo mode with camera fly, smooth transitions.

--=== Services ===--
local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Camera = workspace.CurrentCamera

local lp = Players.LocalPlayer
local char = lp.Character or lp.CharacterAdded:Wait()
local humanoid = char:WaitForChild("Humanoid")

--=== GUI ===--
local ScreenGui = Instance.new("ScreenGui", lp.PlayerGui)
ScreenGui.Name = "BonsVisualEnhancer"

local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 300, 0, 380)
MainFrame.Position = UDim2.new(0.05, 0, 0.3, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.Active = true
MainFrame.Draggable = true

local UICorner = Instance.new("UICorner", MainFrame)
UICorner.CornerRadius = UDim.new(0, 10)

local Title = Instance.new("TextLabel", MainFrame)
Title.Size = UDim2.new(1, -40, 0, 30)
Title.Position = UDim2.new(0, 10, 0, 5)
Title.Text = "üé® Bons Visual Enhancer"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.GothamBold
Title.TextSize = 16
Title.TextXAlignment = Enum.TextXAlignment.Left

-- Minimize Button
local MinBtn = Instance.new("TextButton", MainFrame)
MinBtn.Size = UDim2.new(0, 30, 0, 30)
MinBtn.Position = UDim2.new(1, -35, 0, 5)
MinBtn.Text = "-"
MinBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
MinBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
local MinCorner = Instance.new("UICorner", MinBtn)
MinCorner.CornerRadius = UDim.new(0, 5)

-- Close Button
local CloseBtn = Instance.new("TextButton", MainFrame)
CloseBtn.Size = UDim2.new(0, 30, 0, 30)
CloseBtn.Position = UDim2.new(1, -70, 0, 5)
CloseBtn.Text = "X"
CloseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
local CloseCorner = Instance.new("UICorner", CloseBtn)
CloseCorner.CornerRadius = UDim.new(0, 5)

--=== Lighting Effects ===--
local function applyPreset(preset)
	Lighting.Ambient = Color3.fromRGB(150, 150, 150)
	Lighting.OutdoorAmbient = Color3.fromRGB(150, 150, 150)
	Lighting.Brightness = 2
	Lighting.EnvironmentDiffuseScale = 1
	Lighting.EnvironmentSpecularScale = 1
	Lighting.ShadowSoftness = 0.2
	Lighting.GlobalShadows = true

	if preset == "Morning" then
		Lighting.TimeOfDay = "07:00:00"
		Lighting.Brightness = 3
	elseif preset == "Noon" then
		Lighting.TimeOfDay = "12:00:00"
		Lighting.Brightness = 3.5
	elseif preset == "Sunset" then
		Lighting.TimeOfDay = "18:00:00"
		Lighting.Brightness = 2.2
		Lighting.OutdoorAmbient = Color3.fromRGB(255, 170, 120)
	elseif preset == "Night" then
		Lighting.TimeOfDay = "23:00:00"
		Lighting.Brightness = 1.2
		Lighting.OutdoorAmbient = Color3.fromRGB(80, 80, 100)
	end
end

--=== Depth Of Field ===--
local DOF = Instance.new("DepthOfFieldEffect", Lighting)
DOF.Enabled = false
DOF.FarIntensity = 0.5
DOF.FocusDistance = 50
DOF.InFocusRadius = 15
DOF.NearIntensity = 0.5

--=== Bloom ===--
local Bloom = Instance.new("BloomEffect", Lighting)
Bloom.Intensity = 0.4
Bloom.Size = 40
Bloom.Threshold = 1

--=== Sun Rays ===--
local SunRays = Instance.new("SunRaysEffect", Lighting)
SunRays.Intensity = 0.15
SunRays.Spread = 1

--=== Photo Mode ===--
local photoMode = false
local camSpeed = 1
local savedWalkSpeed = humanoid.WalkSpeed
local savedJumpPower = humanoid.JumpPower

local function enablePhotoMode()
	photoMode = true
	savedWalkSpeed = humanoid.WalkSpeed
	savedJumpPower = humanoid.JumpPower
	humanoid.WalkSpeed = 0
	humanoid.JumpPower = 0
	humanoid.PlatformStand = true
end

local function disablePhotoMode()
	photoMode = false
	humanoid.WalkSpeed = savedWalkSpeed
	humanoid.JumpPower = savedJumpPower
	humanoid.PlatformStand = false
end

-- Camera control
RunService.RenderStepped:Connect(function()
	if photoMode then
		if UserInputService:IsKeyDown(Enum.KeyCode.W) then
			Camera.CFrame = Camera.CFrame + Camera.CFrame.LookVector * camSpeed
		end
		if UserInputService:IsKeyDown(Enum.KeyCode.S) then
			Camera.CFrame = Camera.CFrame - Camera.CFrame.LookVector * camSpeed
		end
		if UserInputService:IsKeyDown(Enum.KeyCode.A) then
			Camera.CFrame = Camera.CFrame - Camera.CFrame.RightVector * camSpeed
		end
		if UserInputService:IsKeyDown(Enum.KeyCode.D) then
			Camera.CFrame = Camera.CFrame + Camera.CFrame.RightVector * camSpeed
		end
		if UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then
			camSpeed = 0.5
		else
			camSpeed = 1
		end
	end
end)

--=== GUI Buttons ===--
local function createButton(text, order, callback)
	local btn = Instance.new("TextButton", MainFrame)
	btn.Size = UDim2.new(1, -20, 0, 30)
	btn.Position = UDim2.new(0, 10, 0, 40 + (order * 35))
	btn.Text = text
	btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 14
	local corner = Instance.new("UICorner", btn)
	corner.CornerRadius = UDim.new(0, 5)
	btn.MouseButton1Click:Connect(callback)
end

createButton("üåÖ Morning", 0, function() applyPreset("Morning") end)
createButton("‚òÄÔ∏è Noon", 1, function() applyPreset("Noon") end)
createButton("üåá Sunset", 2, function() applyPreset("Sunset") end)
createButton("üåô Night", 3, function() applyPreset("Night") end)
createButton("üì∑ Toggle Photo Mode", 4, function()
	if photoMode then disablePhotoMode() else enablePhotoMode() end
end)
createButton("üîç Toggle DOF", 5, function()
	DOF.Enabled = not DOF.Enabled
end)

--=== Minimize/Close ===--
local minimized = false
MinBtn.MouseButton1Click:Connect(function()
	minimized = not minimized
	if minimized then
		for _, obj in ipairs(MainFrame:GetChildren()) do
			if obj ~= Title and obj ~= MinBtn and obj ~= CloseBtn and not obj:IsA("UICorner") then
				obj.Visible = false
			end
		end
		MainFrame.Size = UDim2.new(0, 150, 0, 40)
	else
		for _, obj in ipairs(MainFrame:GetChildren()) do
			obj.Visible = true
		end
		MainFrame.Size = UDim2.new(0, 300, 0, 380)
	end
end)

CloseBtn.MouseButton1Click:Connect(function()
	ScreenGui:Destroy()
end)

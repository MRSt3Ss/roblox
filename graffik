--[[
  Bons Graphics Enhancer - Cinematic Roblox Shader
  Fitur:
  - Bloom, Sun Rays, Depth of Field, Color Correction
  - Preset Pagi, Senja, Malam
  - Slider kontrol intensitas Depth of Field
  - Tidak langsung aktif, bisa aktifkan lewat GUI
--]]

local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")

-- Hapus efek lama kalau ada
for _, obj in pairs(Lighting:GetChildren()) do
    if obj:IsA("BloomEffect") or obj:IsA("SunRaysEffect") or obj:IsA("DepthOfFieldEffect") or obj:IsA("ColorCorrectionEffect") then
        obj:Destroy()
    end
end

-- Buat efek tapi default nonaktif
local bloom = Instance.new("BloomEffect", Lighting)
bloom.Intensity = 0
bloom.Size = 24
bloom.Threshold = 2

local sunrays = Instance.new("SunRaysEffect", Lighting)
sunrays.Intensity = 0
sunrays.Spread = 0.8

local dof = Instance.new("DepthOfFieldEffect", Lighting)
dof.InFocusRadius = 20
dof.FarIntensity = 0
dof.NearIntensity = 0

local cc = Instance.new("ColorCorrectionEffect", Lighting)
cc.Brightness = 0
cc.Contrast = 0
cc.Saturation = 0

-- Buat GUI
local player = Players.LocalPlayer
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "BonsGraphicsGUI"

local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0, 300, 0, 200)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -100)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true

local title = Instance.new("TextLabel", mainFrame)
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
title.Text = "ðŸŽ¨ Bons Graphics Enhancer"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 16

-- Tombol Aktifkan Shader
local toggleBtn = Instance.new("TextButton", mainFrame)
toggleBtn.Size = UDim2.new(0.5, -5, 0, 30)
toggleBtn.Position = UDim2.new(0, 5, 0, 40)
toggleBtn.Text = "Aktifkan Shader"
toggleBtn.BackgroundColor3 = Color3.fromRGB(50, 150, 50)
toggleBtn.TextColor3 = Color3.new(1, 1, 1)
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.TextSize = 14

local shaderOn = false
toggleBtn.MouseButton1Click:Connect(function()
    shaderOn = not shaderOn
    if shaderOn then
        bloom.Intensity = 0.7
        sunrays.Intensity = 0.2
        dof.FarIntensity = 0.3
        cc.Contrast = 0.2
        cc.Saturation = 0.2
        toggleBtn.Text = "Matikan Shader"
        toggleBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
    else
        bloom.Intensity = 0
        sunrays.Intensity = 0
        dof.FarIntensity = 0
        cc.Contrast = 0
        cc.Saturation = 0
        toggleBtn.Text = "Aktifkan Shader"
        toggleBtn.BackgroundColor3 = Color3.fromRGB(50, 150, 50)
    end
end)

-- Slider Blur Depth of Field
local blurLabel = Instance.new("TextLabel", mainFrame)
blurLabel.Size = UDim2.new(1, -10, 0, 20)
blurLabel.Position = UDim2.new(0, 5, 0, 80)
blurLabel.Text = "Blur Level"
blurLabel.TextColor3 = Color3.new(1, 1, 1)
blurLabel.BackgroundTransparency = 1
blurLabel.Font = Enum.Font.Gotham
blurLabel.TextSize = 14

local blurSlider = Instance.new("TextButton", mainFrame)
blurSlider.Size = UDim2.new(1, -10, 0, 20)
blurSlider.Position = UDim2.new(0, 5, 0, 105)
blurSlider.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
blurSlider.Text = "Geser untuk atur"
blurSlider.TextColor3 = Color3.new(1, 1, 1)
blurSlider.Font = Enum.Font.Gotham
blurSlider.TextSize = 12

local UserInputService = game:GetService("UserInputService")
local dragging = false
blurSlider.MouseButton1Down:Connect(function() dragging = true end)
UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)
UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local mouseX = input.Position.X
        local minX = blurSlider.AbsolutePosition.X
        local maxX = minX + blurSlider.AbsoluteSize.X
        local pct = math.clamp((mouseX - minX) / (maxX - minX), 0, 1)
        dof.FarIntensity = pct
        blurSlider.Text = "Blur: " .. math.floor(pct * 100) .. "%"
    end
end)

-- Preset Pagi
local pagiBtn = Instance.new("TextButton", mainFrame)
pagiBtn.Size = UDim2.new(0.3, -5, 0, 30)
pagiBtn.Position = UDim2.new(0, 5, 0, 140)
pagiBtn.Text = "Pagi"
pagiBtn.BackgroundColor3 = Color3.fromRGB(255, 200, 100)
pagiBtn.TextColor3 = Color3.new(0, 0, 0)
pagiBtn.Font = Enum.Font.GothamBold
pagiBtn.TextSize = 14
pagiBtn.MouseButton1Click:Connect(function()
    Lighting.TimeOfDay = "06:00:00"
    cc.TintColor = Color3.fromRGB(255, 240, 200)
end)

-- Preset Senja
local senjaBtn = Instance.new("TextButton", mainFrame)
senjaBtn.Size = UDim2.new(0.3, -5, 0, 30)
senjaBtn.Position = UDim2.new(0.35, 0, 0, 140)
senjaBtn.Text = "Senja"
senjaBtn.BackgroundColor3 = Color3.fromRGB(255, 150, 100)
senjaBtn.TextColor3 = Color3.new(0, 0, 0)
senjaBtn.Font = Enum.Font.GothamBold
senjaBtn.TextSize = 14
senjaBtn.MouseButton1Click:Connect(function()
    Lighting.TimeOfDay = "18:30:00"
    cc.TintColor = Color3.fromRGB(255, 200, 150)
end)

-- Preset Malam
local malamBtn = Instance.new("TextButton", mainFrame)
malamBtn.Size = UDim2.new(0.3, -5, 0, 30)
malamBtn.Position = UDim2.new(0.7, 0, 0, 140)
malamBtn.Text = "Malam"
malamBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 255)
malamBtn.TextColor3 = Color3.new(1, 1, 1)
malamBtn.Font = Enum.Font.GothamBold
malamBtn.TextSize = 14
malamBtn.MouseButton1Click:Connect(function()
    Lighting.TimeOfDay = "23:00:00"
    cc.TintColor = Color3.fromRGB(200, 220, 255)
end)

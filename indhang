--[[
	Enhanced Custom UI Library - Final Merged Version with Indo Hangout Project V6
	
	Deskripsi:
	- [BARU] Logika Auto Fish diperbarui untuk mendukung SEMUA jenis pancingan (Rod).
	- [BARU] Mekanisme reset Auto Fish disempurnakan untuk mengatasi bug saat reeling macet dan saat gagal mendapat ikan.
	- Mempertahankan semua fitur sebelumnya: Key System online, Loading Screen, Tab Settings, dll.
]]

-- Membuat tabel utama untuk library
local CustomUI = {}
CustomUI.__index = CustomUI

--==============================================================================
-- Services & Konfigurasi Awal
--==============================================================================

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local HttpService = game:GetService("HttpService")
local CoreGui = game:GetService("CoreGui") or game.Players.LocalPlayer:WaitForChild("PlayerGui")

-- Sistem Tema (Themes)
local Themes = {
Â  Â  Default = {
Â  Â  Â  Â  Name = "Default", Main = Color3.fromRGB(25, 25, 25), Secondary = Color3.fromRGB(35, 35, 35),
Â  Â  Â  Â  Accent = Color3.fromRGB(0, 85, 255), Text = Color3.fromRGB(255, 255, 255),
Â  Â  Â  Â  TextSecondary = Color3.fromRGB(200, 200, 200), Success = Color3.fromRGB(0, 255, 127),
Â  Â  Â  Â  Warning = Color3.fromRGB(255, 170, 0), Error = Color3.fromRGB(255, 50, 50),
Â  Â  Â  Â  Section = Color3.fromRGB(45, 45, 45)
Â  Â  },
Â  Â  Dark = {
Â  Â  Â  Â  Name = "Dark", Main = Color3.fromRGB(15, 15, 15), Secondary = Color3.fromRGB(25, 25, 25),
Â  Â  Â  Â  Accent = Color3.fromRGB(0, 150, 255), Text = Color3.fromRGB(240, 240, 240),
Â  Â  Â  Â  TextSecondary = Color3.fromRGB(180, 180, 180), Success = Color3.fromRGB(0, 230, 118),
Â  Â  Â  Â  Warning = Color3.fromRGB(255, 200, 0), Error = Color3.fromRGB(255, 40, 40),
Â  Â  Â  Â  Section = Color3.fromRGB(35, 35, 35)
Â  Â  },
Â  Â  Light = {
Â  Â  Â  Â  Name = "Light", Main = Color3.fromRGB(245, 245, 245), Secondary = Color3.fromRGB(230, 230, 230),
Â  Â  Â  Â  Accent = Color3.fromRGB(0, 120, 215), Text = Color3.fromRGB(30, 30, 30),
Â  Â  Â  Â  TextSecondary = Color3.fromRGB(100, 100, 100), Success = Color3.fromRGB(0, 200, 83),
Â  Â  Â  Â  Warning = Color3.fromRGB(255, 160, 0), Error = Color3.fromRGB(255, 0, 0),
Â  Â  Â  Â  Section = Color3.fromRGB(220, 220, 220)
Â  Â  },
Â  Â  Purple = {
Â  Â  Â  Â  Name = "Purple", Main = Color3.fromRGB(30, 25, 40), Secondary = Color3.fromRGB(40, 35, 50),
Â  Â  Â  Â  Accent = Color3.fromRGB(170, 0, 255), Text = Color3.fromRGB(255, 255, 255),
Â  Â  Â  Â  TextSecondary = Color3.fromRGB(200, 200, 200), Success = Color3.fromRGB(0, 255, 170),
Â  Â  Â  Â  Warning = Color3.fromRGB(255, 200, 0), Error = Color3.fromRGB(255, 50, 100),
Â  Â  Â  Â  Section = Color3.fromRGB(50, 45, 60)
Â  Â  }
}


local CurrentTheme = Themes.Default
local UIEnabled = true
local ToggleUIKeybind = "RightControl"

--==============================================================================
-- Fungsi Bantuan (Utility Functions)
--==============================================================================

local function CreateInstance(className, properties)
Â  Â  local instance = Instance.new(className)
Â  Â  for prop, value in pairs(properties) do
Â  Â  Â  Â  if prop ~= "Parent" then instance[prop] = value end
Â  Â  end
Â  Â  if properties.Parent then instance.Parent = properties.Parent end
Â  Â  return instance
end

local function ApplyCornerRadius(instance, radius)
Â  Â  local corner = instance:FindFirstChildOfClass("UICorner") or CreateInstance("UICorner", { Parent = instance })
Â  Â  corner.CornerRadius = UDim.new(0, radius)
Â  Â  return corner
end

local function ApplyStroke(instance, color, thickness)
Â  Â  local stroke = instance:FindFirstChildOfClass("UIStroke") or CreateInstance("UIStroke", { Parent = instance })
Â  Â  stroke.Color = color
Â  Â  stroke.Thickness = thickness
Â  Â  return stroke
end

local function SmoothTween(instance, properties, duration, easingStyle, easingDirection)
Â  Â  local tweenInfo = TweenInfo.new(duration or 0.3, easingStyle or Enum.EasingStyle.Quint, easingDirection or Enum.EasingDirection.Out)
Â  Â  local tween = TweenService:Create(instance, tweenInfo, properties)
Â  Â  tween:Play()
Â  Â  return tween
end

--==============================================================================
-- Sistem Notifikasi
--==============================================================================

function CustomUI:Notify(options)
Â  Â  options = options or {}
Â  Â  local notificationGui = CreateInstance("ScreenGui", { Name = "Notification", ZIndexBehavior = Enum.ZIndexBehavior.Sibling, DisplayOrder = 999, Parent = CoreGui })
Â  Â  local mainFrame = CreateInstance("Frame", { Name = "MainFrame", Size = UDim2.new(0, 300, 0, 80), Position = UDim2.new(1, 20, 0, 20), BackgroundColor3 = CurrentTheme.Secondary, Parent = notificationGui })
Â  Â  ApplyCornerRadius(mainFrame, 8)
Â  Â  ApplyStroke(mainFrame, CurrentTheme.Main, 1)
Â  Â  CreateInstance("TextLabel", { Name = "Title", Size = UDim2.new(1, -30, 0, 20), Position = UDim2.new(0, 15, 0, 10), BackgroundTransparency = 1, Text = options.Title or "Notification", TextColor3 = CurrentTheme.Text, TextSize = 16, TextXAlignment = Enum.TextXAlignment.Left, Font = Enum.Font.GothamSemibold, Parent = mainFrame })
Â  Â  CreateInstance("TextLabel", { Name = "Content", Size = UDim2.new(1, -30, 1, -40), Position = UDim2.new(0, 15, 0, 35), BackgroundTransparency = 1, Text = options.Content or "This is a notification", TextColor3 = CurrentTheme.TextSecondary, TextSize = 14, TextWrapped = true, TextXAlignment = Enum.TextXAlignment.Left, TextYAlignment = Enum.TextYAlignment.Top, Font = Enum.Font.Gotham, Parent = mainFrame })
Â  Â Â 
Â  Â  SmoothTween(mainFrame, {Position = UDim2.new(1, -320, 0, 20)}, 0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
Â  Â  task.delay(options.Duration or 5, function()
Â  Â  Â  Â  if not mainFrame or not mainFrame.Parent then return end
Â  Â  Â  Â  SmoothTween(mainFrame, {Position = UDim2.new(1, 20, 0, 20)}, 0.5, Enum.EasingStyle.Back, Enum.EasingDirection.In)
Â  Â  Â  Â  task.wait(0.5)
Â  Â  Â  Â  notificationGui:Destroy()
Â  Â  end)
Â  Â  return notificationGui
end

--==============================================================================
-- Pembuatan Jendela Utama (Window)
--==============================================================================

function CustomUI:CreateWindow(options)
Â  Â  options = options or {}
Â  Â  local window = {}
Â  Â  local screenGui = CreateInstance("ScreenGui", { Name = "CustomUI", ZIndexBehavior = Enum.ZIndexBehavior.Sibling, Enabled = false })
Â  Â Â 
Â  Â  local mainFrame = CreateInstance("Frame", { Name = "MainFrame", Size = UDim2.new(0, 500, 0, 500), Position = UDim2.new(0.5, -250, 0.5, -250), BackgroundColor3 = CurrentTheme.Main, Parent = screenGui, ClipsDescendants = true })
Â  Â  ApplyCornerRadius(mainFrame, 12)
Â  Â  local mainStroke = ApplyStroke(mainFrame, CurrentTheme.Accent, 2)
Â  Â Â 
Â  Â  local titleBar = CreateInstance("Frame", { Name = "TitleBar", Size = UDim2.new(1, 0, 0, 40), BackgroundColor3 = CurrentTheme.Secondary, Parent = mainFrame })
Â  Â  local titleLabel = CreateInstance("TextLabel", { Name = "Title", Size = UDim2.new(1, -60, 1, 0), Position = UDim2.new(0, 15, 0, 0), BackgroundTransparency = 1, Text = options.Name or "Custom UI", TextColor3 = CurrentTheme.Text, TextSize = 18, TextXAlignment = Enum.TextXAlignment.Left, Font = Enum.Font.GothamBold, Parent = titleBar })
Â  Â  local closeButton = CreateInstance("TextButton", { Name = "CloseButton", Size = UDim2.new(0, 30, 0, 30), Position = UDim2.new(1, -40, 0.5, -15), BackgroundColor3 = CurrentTheme.Error, Text = "Ã—", TextColor3 = CurrentTheme.Text, TextSize = 20, Font = Enum.Font.GothamBold, Parent = titleBar })
Â  Â  ApplyCornerRadius(closeButton, 6)
Â  Â Â 
Â  Â  local tabContainer = CreateInstance("Frame", { Name = "TabContainer", Size = UDim2.new(1, -20, 0, 35), Position = UDim2.new(0, 10, 0, 45), BackgroundTransparency = 1, Parent = mainFrame })
Â  Â  CreateInstance("UIListLayout", { FillDirection = Enum.FillDirection.Horizontal, Padding = UDim.new(0, 5), Parent = tabContainer })
Â  Â Â 
Â  Â  local contentFrame = CreateInstance("Frame", { Name = "Content", Size = UDim2.new(1, -20, 1, -90), Position = UDim2.new(0, 10, 0, 85), BackgroundTransparency = 1, Parent = mainFrame, ClipsDescendants = true })
Â  Â Â 
Â  Â  -- Dragging Logic
Â  Â  local dragging, dragStart, startPos
Â  Â  titleBar.InputBegan:Connect(function(input)
Â  Â  Â  Â  if input.UserInputType == Enum.UserInputType.MouseButton1 then
Â  Â  Â  Â  Â  Â  dragging = true; dragStart = input.Position; startPos = mainFrame.Position
Â  Â  Â  Â  Â  Â  local conn
Â  Â  Â  Â  Â  Â  conn = input.Changed:Connect(function() if input.UserInputState == Enum.UserInputState.End then dragging = false; conn:Disconnect() end end)
Â  Â  Â  Â  end
Â  Â  end)
Â  Â  UserInputService.InputChanged:Connect(function(input) if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then local delta = input.Position - dragStart; mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y) end end)
Â  Â Â 
Â  Â  -- Button Animation Logic
Â  Â  local function SetupButtonAnimation(button, normalColor, hoverColor)
Â  Â  Â  Â  button.MouseEnter:Connect(function() SmoothTween(button, {BackgroundColor3 = hoverColor}, 0.2) end)
Â  Â  Â  Â  button.MouseLeave:Connect(function() SmoothTween(button, {BackgroundColor3 = normalColor}, 0.2) end)
Â  Â  end
Â  Â  SetupButtonAnimation(closeButton, CurrentTheme.Error, Color3.fromRGB(255, 80, 80))
Â  Â  closeButton.MouseButton1Click:Connect(function()
Â  Â  Â  Â  SmoothTween(mainFrame, {Size = UDim2.new(0, 0, 0, 0), Position = UDim2.new(0.5, 0, 0.5, 0)}, 0.3)
Â  Â  Â  Â  task.wait(0.3)
Â  Â  Â  Â  screenGui:Destroy()
Â  Â  end)
Â  Â Â 
Â  Â  -- Keybind Logic
Â  Â  local function SetupKeybind()
Â  Â  Â  Â  UserInputService.InputBegan:Connect(function(input, gameProcessed)
Â  Â  Â  Â  Â  Â  if gameProcessed then return end
Â  Â  Â  Â  Â  Â  if input.KeyCode.Name == ToggleUIKeybind then UIEnabled = not UIEnabled; mainFrame.Visible = UIEnabled end
Â  Â  Â  Â  end)
Â  Â  end
Â  Â Â 
Â  Â  function window:CreateTab(name, icon)
Â  Â  Â  Â  local tab = {}
Â  Â  Â  Â  local tabButton = CreateInstance("TextButton", { Name = name .. "Tab", Size = UDim2.new(0, 100, 1, 0), BackgroundColor3 = CurrentTheme.Secondary, Text = name, TextColor3 = CurrentTheme.TextSecondary, TextSize = 14, Font = Enum.Font.Gotham, Parent = tabContainer })
Â  Â  Â  Â  ApplyCornerRadius(tabButton, 6)
Â  Â  Â  Â  local tabContent = CreateInstance("ScrollingFrame", { Name = name .. "Content", Size = UDim2.new(1, 0, 1, 0), BackgroundTransparency = 1, BorderSizePixel = 0, ScrollBarImageColor3 = CurrentTheme.Accent, ScrollBarThickness = 4, CanvasSize = UDim2.new(), AutomaticCanvasSize = Enum.AutomaticSize.Y, Visible = false, Parent = contentFrame })
Â  Â  Â  Â  CreateInstance("UIListLayout", { Padding = UDim.new(0, 10), Parent = tabContent, SortOrder = Enum.SortOrder.LayoutOrder})
Â  Â  Â  Â  CreateInstance("UIPadding", { PaddingTop = UDim.new(0, 10), PaddingLeft = UDim.new(0, 5), PaddingRight = UDim.new(0, 5), Parent = tabContent })
Â  Â  Â  Â Â 
Â  Â  Â  Â  local function ActivateTab()
Â  Â  Â  Â  Â  Â  for _, child in pairs(tabContainer:GetChildren()) do if child:IsA("TextButton") then SmoothTween(child, {BackgroundColor3 = CurrentTheme.Secondary, TextColor3 = CurrentTheme.TextSecondary}, 0.2) end end
Â  Â  Â  Â  Â  Â  for _, child in pairs(contentFrame:GetChildren()) do if child:IsA("ScrollingFrame") then child.Visible = false end end
Â  Â  Â  Â  Â  Â  SmoothTween(tabButton, {BackgroundColor3 = CurrentTheme.Accent, TextColor3 = CurrentTheme.Text}, 0.2)
Â  Â  Â  Â  Â  Â  tabContent.Visible = true
Â  Â  Â  Â  end
Â  Â  Â  Â  tabButton.MouseButton1Click:Connect(ActivateTab)
Â  Â  Â  Â  if #tabContainer:GetChildren() == 1 then ActivateTab() end
Â  Â  Â  Â Â 
Â  Â  Â  Â  function tab:CreateSection(title)
Â  Â  Â  Â  Â  Â  local sectionFrame = CreateInstance("Frame", { Name = "SectionFrame", Size = UDim2.new(1, 0, 0, 30), BackgroundColor3 = CurrentTheme.Section, Parent = tabContent })
Â  Â  Â  Â  Â  Â  ApplyCornerRadius(sectionFrame, 6)
Â  Â  Â  Â  Â  Â  ApplyStroke(sectionFrame, CurrentTheme.Accent, 1)
Â  Â  Â  Â  Â  Â  CreateInstance("TextLabel", { Name = "SectionLabel", Size = UDim2.new(1, -20, 1, 0), Position = UDim2.new(0, 10, 0, 0), BackgroundTransparency = 1, Text = title or "Section", TextColor3 = CurrentTheme.Text, TextSize = 14, TextXAlignment = Enum.TextXAlignment.Left, Font = Enum.Font.GothamSemibold, Parent = sectionFrame })
Â  Â  Â  Â  Â  Â  return sectionFrame
Â  Â  Â  Â  end
Â  Â  Â  Â Â 
Â  Â  Â  Â  function tab:CreateButton(options)
Â  Â  Â  Â  Â  Â  local buttonFrame = CreateInstance("Frame", { Name = "ButtonFrame", Size = UDim2.new(1, 0, 0, 40), BackgroundColor3 = CurrentTheme.Secondary, Parent = tabContent })
Â  Â  Â  Â  Â  Â  ApplyCornerRadius(buttonFrame, 8)
Â  Â  Â  Â  Â  Â  local button = CreateInstance("TextButton", { Name = "Button", Size = UDim2.new(1, 0, 1, 0), BackgroundTransparency = 1, Text = options.Name or "Button", TextColor3 = CurrentTheme.Text, TextSize = 14, Font = Enum.Font.Gotham, Parent = buttonFrame })
Â  Â  Â  Â  Â  Â  button.MouseEnter:Connect(function() SmoothTween(buttonFrame, {BackgroundColor3 = CurrentTheme.Accent}, 0.2) end)
Â  Â  Â  Â  Â  Â  button.MouseLeave:Connect(function() SmoothTween(buttonFrame, {BackgroundColor3 = CurrentTheme.Secondary}, 0.2) end)
Â  Â  Â  Â  Â  Â  if options.Callback then button.MouseButton1Click:Connect(options.Callback) end
Â  Â  Â  Â  Â  Â  return button
Â  Â  Â  Â  end
Â  Â  Â  Â Â 
Â  Â  Â  Â  function tab:CreateToggle(options)
Â  Â  Â  Â  Â  Â  local isToggled = options.CurrentValue or false
Â  Â  Â  Â  Â  Â  local toggleFrame = CreateInstance("Frame", { Name = "ToggleFrame", Size = UDim2.new(1, 0, 0, 40), BackgroundColor3 = CurrentTheme.Secondary, Parent = tabContent })
Â  Â  Â  Â  Â  Â  ApplyCornerRadius(toggleFrame, 8)
Â  Â  Â  Â  Â  Â  local clickableArea = CreateInstance("TextButton", { Name = "ClickableArea", Size = UDim2.new(1,0,1,0), BackgroundTransparency = 1, Text="", Parent = toggleFrame, ZIndex = 2 })
Â  Â  Â  Â  Â  Â  local label = CreateInstance("TextLabel", { Name = "Label", Size = UDim2.new(0.7, 0, 1, 0), Position = UDim2.new(0, 10, 0, 0), BackgroundTransparency = 1, Text = options.Name or "Toggle", TextColor3 = CurrentTheme.Text, TextSize = 14, TextXAlignment = Enum.TextXAlignment.Left, Font = Enum.Font.Gotham, Parent = toggleFrame })
Â  Â  Â  Â  Â  Â  local toggleContainer = CreateInstance("Frame", { Name = "ToggleContainer", Size = UDim2.new(0, 40, 0, 20), Position = UDim2.new(1, -50, 0.5, -10), BackgroundColor3 = Color3.fromRGB(80, 80, 80), Parent = toggleFrame })
Â  Â  Â  Â  Â  Â  ApplyCornerRadius(toggleContainer, 10)
Â  Â  Â  Â  Â  Â  local toggleKnob = CreateInstance("Frame", { Name = "ToggleKnob", Size = UDim2.new(0, 16, 0, 16), Position = UDim2.new(0, 2, 0.5, -8), BackgroundColor3 = CurrentTheme.Text, Parent = toggleContainer })
Â  Â  Â  Â  Â  Â  ApplyCornerRadius(toggleKnob, 8)
Â  Â  Â  Â  Â  Â  local function UpdateToggle()
Â  Â  Â  Â  Â  Â  Â  Â  local knobPos = isToggled and UDim2.new(1, -18, 0.5, -8) or UDim2.new(0, 2, 0.5, -8)
Â  Â  Â  Â  Â  Â  Â  Â  local bgColor = isToggled and CurrentTheme.Accent or Color3.fromRGB(80, 80, 80)
Â  Â  Â  Â  Â  Â  Â  Â  SmoothTween(toggleContainer, {BackgroundColor3 = bgColor}, 0.2)
Â  Â  Â  Â  Â  Â  Â  Â  SmoothTween(toggleKnob, {Position = knobPos}, 0.2)
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  local function Toggle() isToggled = not isToggled
Â  Â  Â  Â  Â  Â  Â  Â  UpdateToggle(); if options.Callback then pcall(options.Callback, isToggled) end end
Â  Â  Â  Â  Â  Â  clickableArea.MouseButton1Click:Connect(Toggle)
Â  Â  Â  Â  Â  Â  UpdateToggle()
Â  Â  Â  Â  Â  Â  local toggleObject = {}
Â  Â  Â  Â  Â  Â  function toggleObject:Set(v) isToggled = v; UpdateToggle() end; function toggleObject:Get() return isToggled end
Â  Â  Â  Â  Â  Â  return toggleObject
Â  Â  Â  Â  end
Â  Â  Â  Â Â 
Â  Â  Â  Â  function tab:CreateSlider(options)
Â  Â  Â  Â  Â  Â  local sliderFrame = CreateInstance("Frame", { Name = "SliderFrame", Size = UDim2.new(1, 0, 0, 70), BackgroundColor3 = CurrentTheme.Secondary, Parent = tabContent })
Â  Â  Â  Â  Â  Â  ApplyCornerRadius(sliderFrame, 8)
Â  Â  Â  Â  Â  Â  local label = CreateInstance("TextLabel", { Name = "Label", Size = UDim2.new(1, -80, 0, 20), Position = UDim2.new(0, 10, 0, 5), BackgroundTransparency = 1, Text = options.Name or "Slider", TextColor3 = CurrentTheme.Text, TextSize = 14, TextXAlignment = Enum.TextXAlignment.Left, Font = Enum.Font.Gotham, Parent = sliderFrame })
Â  Â  Â  Â  Â  Â  local valueLabel = CreateInstance("TextLabel", { Name = "ValueLabel", Size = UDim2.new(0, 60, 0, 20), Position = UDim2.new(1, -70, 0, 5), BackgroundTransparency = 1, TextColor3 = CurrentTheme.TextSecondary, TextSize = 14, TextXAlignment = Enum.TextXAlignment.Right, Font = Enum.Font.Gotham, Parent = sliderFrame })
Â  Â  Â  Â  Â  Â  local sliderTrack = CreateInstance("Frame", { Name = "SliderTrack", Size = UDim2.new(1, -20, 0, 6), Position = UDim2.new(0, 10, 0, 35), BackgroundColor3 = Color3.fromRGB(60, 60, 60), Parent = sliderFrame })
Â  Â  Â  Â  Â  Â  ApplyCornerRadius(sliderTrack, 3)
Â  Â  Â  Â  Â  Â  local sliderFill = CreateInstance("Frame", { Name = "SliderFill", Size = UDim2.new(0.5, 0, 1, 0), BackgroundColor3 = CurrentTheme.Accent, Parent = sliderTrack })
Â  Â  Â  Â  Â  Â  ApplyCornerRadius(sliderFill, 3)
Â  Â  Â  Â  Â  Â  local sliderButton = CreateInstance("TextButton", { Name = "SliderButton", Size = UDim2.new(0, 16, 0, 16), Position = UDim2.new(0.5, -8, 0.5, -8), BackgroundColor3 = CurrentTheme.Text, Text = "", AutoButtonColor = false, Parent = sliderTrack })
Â  Â  Â  Â  Â  Â  ApplyCornerRadius(sliderButton, 8)
Â  Â  Â  Â  Â  Â  local range, increment, currentValue = options.Range or {0, 100}, options.Increment or 1, options.CurrentValue or 50
Â  Â  Â  Â  Â  Â  local function UpdateSlider(value)
Â  Â  Â  Â  Â  Â  Â  Â  currentValue = math.clamp(math.floor(value / increment + 0.5) * increment, range[1], range[2])
Â  Â  Â  Â  Â  Â  Â  Â  local percentage = (currentValue - range[1]) / (range[2] - range[1])
Â  Â  Â  Â  Â  Â  Â  Â  SmoothTween(sliderFill, {Size = UDim2.new(percentage, 0, 1, 0)}, 0.05)
Â  Â  Â  Â  Â  Â  Â  Â  SmoothTween(sliderButton, {Position = UDim2.new(percentage, -8, 0.5, -8)}, 0.05)
Â  Â  Â  Â  Â  Â  Â  Â  valueLabel.Text = tostring(currentValue) .. (options.Suffix or "")
Â  Â  Â  Â  Â  Â  Â  Â  if options.Callback then pcall(options.Callback, currentValue) end
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  local dragging = false
Â  Â  Â  Â  Â  Â  local function onDrag(input)
Â  Â  Â  Â  Â  Â  Â  Â  local relativeX = input.Position.X - sliderTrack.AbsolutePosition.X
Â  Â  Â  Â  Â  Â  Â  Â  local percentage = math.clamp(relativeX / sliderTrack.AbsoluteSize.X, 0, 1)
Â  Â  Â  Â  Â  Â  Â  Â  local value = range[1] + (range[2] - range[1]) * percentage
Â  Â  Â  Â  Â  Â  Â  Â  UpdateSlider(value)
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  local trackButton = CreateInstance("TextButton", {Size=UDim2.new(1,0,1,0), BackgroundTransparency=1, Text="", Parent=sliderTrack})
Â  Â  Â  Â  Â  Â  trackButton.InputBegan:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = true; onDrag(input) end end)
Â  Â  Â  Â  Â  Â  sliderButton.InputBegan:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = true end end)
Â  Â  Â  Â  Â  Â  UserInputService.InputEnded:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end end)
Â  Â  Â  Â  Â  Â  UserInputService.InputChanged:Connect(function(input) if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then onDrag(input) end end)
Â  Â  Â  Â  Â  Â  UpdateSlider(currentValue)
Â  Â  Â  Â  Â  Â  local sliderObject = {}
Â  Â  Â  Â  Â  Â  function sliderObject:Set(value) UpdateSlider(value) end; function sliderObject:Get() return currentValue end
Â  Â  Â  Â  Â  Â  return sliderObject
Â  Â  Â  Â  end

Â  Â  Â  Â  function tab:CreateKeybind(options)
Â  Â  Â  Â  Â  Â  local keybindFrame = CreateInstance("Frame", { Name = "KeybindFrame", Size = UDim2.new(1, 0, 0, 40), BackgroundColor3 = CurrentTheme.Secondary, Parent = tabContent })
Â  Â  Â  Â  Â  Â  ApplyCornerRadius(keybindFrame, 8)
Â  Â  Â  Â  Â  Â  local label = CreateInstance("TextLabel", { Name = "Label", Size = UDim2.new(0.6, 0, 1, 0), Position = UDim2.new(0, 10, 0, 0), BackgroundTransparency = 1, Text = options.Name or "Keybind", TextColor3 = CurrentTheme.Text, TextSize = 14, TextXAlignment = Enum.TextXAlignment.Left, Font = Enum.Font.Gotham, Parent = keybindFrame })
Â  Â  Â  Â  Â  Â  local keybindButton = CreateInstance("TextButton", { Name = "KeybindButton", Size = UDim2.new(0, 100, 0, 25), Position = UDim2.new(1, -110, 0.5, -12.5), BackgroundColor3 = CurrentTheme.Accent, Text = options.CurrentKeybind or "None", TextColor3 = CurrentTheme.Text, TextSize = 12, Font = Enum.Font.Gotham, Parent = keybindFrame })
Â  Â  Â  Â  Â  Â  ApplyCornerRadius(keybindButton, 6)
Â  Â  Â  Â  Â  Â  local listening = false
Â  Â  Â  Â  Â  Â  keybindButton.MouseButton1Click:Connect(function()
Â  Â  Â  Â  Â  Â  Â  Â  if listening then return end
Â  Â  Â  Â  Â  Â  Â  Â  listening = true
Â  Â  Â  Â  Â  Â  Â  Â  keybindButton.Text = "..."; keybindButton.BackgroundColor3 = CurrentTheme.Warning
Â  Â  Â  Â  Â  Â  Â  Â  local connection
Â  Â  Â  Â  Â  Â  Â  Â  connection = UserInputService.InputBegan:Connect(function(input, gp)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if not gp and input.UserInputType == Enum.UserInputType.Keyboard then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  local key = input.KeyCode.Name; keybindButton.Text = key; keybindButton.BackgroundColor3 = CurrentTheme.Accent
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  listening = false; connection:Disconnect()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if options.Callback then pcall(options.Callback, key) end
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  Â  Â  end)
Â  Â  Â  Â  Â  Â  end)
Â  Â  Â  Â  Â  Â  return keybindButton
Â  Â  Â  Â  end
Â  Â  Â  Â Â 
Â  Â  Â  Â  function tab:CreateDropdown(options)
Â  Â  Â  Â  Â  Â  local dropdownObject = {}
Â  Â  Â  Â  Â  Â  local isOpen = false
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  local dropdownFrame = CreateInstance("Frame", { Name = "DropdownFrame", Size = UDim2.new(1, 0, 0, 70), BackgroundColor3 = CurrentTheme.Secondary, Parent = tabContent, ClipsDescendants = true })
Â  Â  Â  Â  Â  Â  ApplyCornerRadius(dropdownFrame, 8)

Â  Â  Â  Â  Â  Â  local label = CreateInstance("TextLabel", { Name = "Label", Size = UDim2.new(1, -20, 0, 20), Position = UDim2.new(0, 10, 0, 5), BackgroundTransparency = 1, Text = options.Name or "Dropdown", TextColor3 = CurrentTheme.Text, TextSize = 14, TextXAlignment = Enum.TextXAlignment.Left, Font = Enum.Font.Gotham, Parent = dropdownFrame })
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  local mainButton = CreateInstance("TextButton", { Name = "MainButton", Size = UDim2.new(1, -20, 0, 30), Position = UDim2.new(0, 10, 0, 30), BackgroundColor3 = CurrentTheme.Section, Text = options.CurrentOption and options.CurrentOption[1] or "Select...", TextColor3 = CurrentTheme.TextSecondary, TextSize = 13, Font = Enum.Font.Gotham, Parent = dropdownFrame })
Â  Â  Â  Â  Â  Â  ApplyCornerRadius(mainButton, 6)

Â  Â  Â  Â  Â  Â  local optionsList = CreateInstance("ScrollingFrame", { Name = "OptionsList", Position = UDim2.new(0, 10, 0, 65), Size = UDim2.new(1, -20, 0, 120), BackgroundColor3 = CurrentTheme.Section, BorderSizePixel = 0, Visible = false, Parent = dropdownFrame, ZIndex = 2, ScrollBarThickness = 4, ScrollBarImageColor3 = CurrentTheme.Accent })
Â  Â  Â  Â  Â  Â  ApplyCornerRadius(optionsList, 6)
Â  Â  Â  Â  Â  Â  CreateInstance("UIListLayout", { Padding = UDim.new(0, 2), Parent = optionsList })

Â  Â  Â  Â  Â  Â  local function UpdateOptionsList(list)
Â  Â  Â  Â  Â  Â  Â  Â  for _, v in ipairs(optionsList:GetChildren()) do if v:IsA("TextButton") then v:Destroy() end end
Â  Â  Â  Â  Â  Â  Â  Â  for _, optText in ipairs(list) do
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  local optButton = CreateInstance("TextButton", {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Name = optText, Size = UDim2.new(1, 0, 0, 25), BackgroundColor3 = CurrentTheme.Section, Text = optText,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  TextColor3 = CurrentTheme.TextSecondary, TextSize = 12, Font = Enum.Font.Gotham, Parent = optionsList, AutoButtonColor = false
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  optButton.MouseEnter:Connect(function() SmoothTween(optButton, {BackgroundColor3 = CurrentTheme.Accent}, 0.2) end)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  optButton.MouseLeave:Connect(function() SmoothTween(optButton, {BackgroundColor3 = CurrentTheme.Section}, 0.2) end)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  optButton.MouseButton1Click:Connect(function()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mainButton.Text = optText
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isOpen = false
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  optionsList.Visible = false
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  SmoothTween(dropdownFrame, {Size = UDim2.new(1, 0, 0, 70)}, 0.2)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if options.Callback then pcall(options.Callback, {optText}) end
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  end)
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  mainButton.MouseButton1Click:Connect(function()
Â  Â  Â  Â  Â  Â  Â  Â  isOpen = not isOpen
Â  Â  Â  Â  Â  Â  Â  Â  optionsList.Visible = isOpen
Â  Â  Â  Â  Â  Â  Â  Â  if isOpen then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  SmoothTween(dropdownFrame, {Size = UDim2.new(1, 0, 0, 200)}, 0.2)
Â  Â  Â  Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  SmoothTween(dropdownFrame, {Size = UDim2.new(1, 0, 0, 70)}, 0.2)
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  end)
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  function dropdownObject:Set(newOptions)
Â  Â  Â  Â  Â  Â  Â  Â  UpdateOptionsList(newOptions)
Â  Â  Â  Â  Â  Â  end

Â  Â  Â  Â  Â  Â  UpdateOptionsList(options.Options or {})
Â  Â  Â  Â  Â  Â  return dropdownObject
Â  Â  Â  Â  end

Â  Â  Â  Â  function tab:CreateLabel(text) return CreateInstance("TextLabel", { Name = "Label", Size = UDim2.new(1, 0, 0, 25), BackgroundTransparency = 1, Text = text or "Label", TextColor3 = CurrentTheme.TextSecondary, TextSize = 13, TextXAlignment = Enum.TextXAlignment.Left, Font = Enum.Font.Gotham, Parent = tabContent }) end
Â  Â  Â  Â  function tab:CreateDivider() return CreateInstance("Frame", { Name = "DividerFrame", Size = UDim2.new(1, -10, 0, 1), Position = UDim2.new(0, 5, 0, 0), BackgroundColor3 = CurrentTheme.TextSecondary, BackgroundTransparency = 0.7, Parent = tabContent }) end
Â  Â  Â  Â Â 
Â  Â  Â  Â  return tab
Â  Â  end
Â  Â Â 
Â  Â  function window:ChangeTheme(themeName)
Â  Â  Â  Â  if Themes[themeName] then
Â  Â  Â  Â  Â  Â  CurrentTheme = Themes[themeName]
Â  Â  Â  Â  Â  Â  SmoothTween(mainFrame, {BackgroundColor3 = CurrentTheme.Main}, 0.3)
Â  Â  Â  Â  Â  Â  SmoothTween(titleBar, {BackgroundColor3 = CurrentTheme.Secondary}, 0.3)
Â  Â  Â  Â  Â  Â  titleLabel.TextColor3 = CurrentTheme.Text
Â  Â  Â  Â  Â  Â  ApplyStroke(mainFrame, CurrentTheme.Accent, 2)
Â  Â  Â  Â  Â  Â  CustomUI:Notify({ Title = "Theme Changed", Content = "Switched to " .. themeName, Duration = 2 })
Â  Â  Â  Â  end
Â  Â  end
Â  Â Â 
Â  Â  function window:SetToggleKeybind(key)
Â  Â  Â  Â  ToggleUIKeybind = key
Â  Â  Â  Â  CustomUI:Notify({ Title = "Keybind Updated", Content = "Toggle UI keybind set to: " .. key, Duration = 3 })
Â  Â  end
Â  Â Â 
Â  Â  function window:Show()
Â  Â  Â  Â  screenGui.Parent = CoreGui
Â  Â  Â  Â  screenGui.Enabled = true
Â  Â  Â  Â  mainFrame.Visible = true
Â  Â  Â  Â  mainFrame.Size = UDim2.new(0,0,0,0)
Â  Â  Â  Â  SmoothTween(mainFrame, {Size = UDim2.new(0, 500, 0, 500), Position = UDim2.new(0.5, -250, 0.5, -250)}, 0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
Â  Â  end

Â  Â  SetupKeybind()
Â  Â  return window, screenGui
end

--==============================================================================
-- Sistem Kunci (Key System)
--==============================================================================

local function CreateKeySystem(onSuccess)
Â  Â  local keyGui = CreateInstance("ScreenGui", {Name = "KeySystem", ZIndexBehavior = Enum.ZIndexBehavior.Sibling, DisplayOrder = 1000, Parent = CoreGui})
Â  Â  local main = CreateInstance("Frame", {Name="Main", Size=UDim2.new(0,350,0,180), Position=UDim2.new(0.5,-175,0.5,-90), BackgroundColor3=CurrentTheme.Main, Parent=keyGui})
Â  Â  ApplyCornerRadius(main, 8)
Â  Â  ApplyStroke(main, CurrentTheme.Accent, 1)
Â  Â  CreateInstance("TextLabel", {Name="Title", Size=UDim2.new(1,0,0,40), BackgroundTransparency=1, Text="Sistem Kunci", TextColor3=CurrentTheme.Text, TextSize=20, Font=Enum.Font.GothamBold, Parent=main})
Â  Â  local input = CreateInstance("TextBox", {Name="Input", Size=UDim2.new(1,-40,0,40), Position=UDim2.new(0.5,0,0,50), AnchorPoint=Vector2.new(0.5,0), BackgroundColor3=CurrentTheme.Secondary, Text="", PlaceholderText="Memuat kunci...", TextColor3=CurrentTheme.Text, Font=Enum.Font.Gotham, Parent=main})
Â  Â  ApplyCornerRadius(input, 6)
Â  Â  local submit = CreateInstance("TextButton", {Name="Submit", Size=UDim2.new(1,-40,0,40), Position=UDim2.new(0.5,0,0,100), AnchorPoint=Vector2.new(0.5,0), BackgroundColor3=CurrentTheme.Accent, Text="Masuk", TextColor3=CurrentTheme.Text, Font=Enum.Font.GothamSemibold, Parent=main})
Â  Â  ApplyCornerRadius(submit, 6)

Â  Â  local validKeys = nil
Â  Â  local keyUrl = "https://raw.githubusercontent.com/MRSt3Ss/roblox/refs/heads/main/key"

Â  Â  task.spawn(function()
Â  Â  Â  Â  local success, result = pcall(game.HttpGet, game, keyUrl)
Â  Â  Â  Â  if success then
Â  Â  Â  Â  Â  Â  validKeys = {}
Â  Â  Â  Â  Â  Â  for key in result:gmatch("[^%s]+") do
Â  Â  Â  Â  Â  Â  Â  Â  table.insert(validKeys, key)
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if #validKeys > 0 then
Â  Â  Â  Â  Â  Â  Â  Â  input.PlaceholderText = "Masukkan kunci..."
Â  Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  Â  Â  input.PlaceholderText = "Tidak ada kunci di server."
Â  Â  Â  Â  Â  Â  Â  Â  CustomUI:Notify({Title="Error", Content="Tidak ada kunci valid yang ditemukan di server.", Duration=5})
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  input.PlaceholderText = "Gagal memuat kunci!"
Â  Â  Â  Â  Â  Â  CustomUI:Notify({Title="Error", Content="Tidak bisa mengambil kunci dari server.", Duration=5})
Â  Â  Â  Â  end
Â  Â  end)
Â  Â Â 
Â  Â  submit.MouseButton1Click:Connect(function()
Â  Â  Â  Â  if validKeys and table.find(validKeys, input.Text) then
Â  Â  Â  Â  Â  Â  SmoothTween(main, {BackgroundTransparency=1, Size=UDim2.new()}, 0.3)
Â  Â  Â  Â  Â  Â  task.wait(0.3); keyGui:Destroy()
Â  Â  Â  Â  Â  Â  pcall(onSuccess)
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  CustomUI:Notify({Title="Error", Content="Kunci yang dimasukkan salah.", Duration=3})
Â  Â  Â  Â  Â  Â  local originalPos = main.Position
Â  Â  Â  Â  Â  Â  for i = 1, 3 do
Â  Â  Â  Â  Â  Â  Â  Â  SmoothTween(main, {Position = originalPos + UDim2.new(0, 10, 0, 0)}, 0.05); task.wait(0.05)
Â  Â  Â  Â  Â  Â  Â  Â  SmoothTween(main, {Position = originalPos + UDim2.new(0, -10, 0, 0)}, 0.05); task.wait(0.05)
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  SmoothTween(main, {Position = originalPos}, 0.05)
Â  Â  Â  Â  end
Â  Â  end)
end

--==============================================================================
-- Layar Pemuatan (Loading Screen)
--==============================================================================

local function CreateLoadingScreen()
Â  Â  local loadingGui = CreateInstance("ScreenGui", {Name="LoadingScreen", ZIndexBehavior=Enum.ZIndexBehavior.Sibling, DisplayOrder=1001, Parent = CoreGui})
Â  Â  local bg = CreateInstance("Frame", {Size=UDim2.new(1,0,1,0), BackgroundColor3=Color3.new(0,0,0), BackgroundTransparency=0.5, Parent=loadingGui})
Â  Â  CreateInstance("TextLabel", {Size=UDim2.new(1,0,1,0), BackgroundTransparency=1, Text="Memuat...", TextColor3=Color3.new(1,1,1), TextSize=30, Font=Enum.Font.GothamBold, Parent=bg})
Â  Â  return loadingGui
end

--==============================================================================
-- ( START ) LOGIKA INTI DARI PROJECT INDO HANGOUT
--==============================================================================

-- Services
local player = game:GetService("Players").LocalPlayer
local players = game:GetService("Players")
local replicatedStorage = game:GetService("ReplicatedStorage")
local virtualInputManager = game:GetService("VirtualInputManager")
local runService = game:GetService("RunService")

-- Remote
local rodEvent = replicatedStorage:WaitForChild("Remote"):WaitForChild("RodRemoteEvent")
local sellRemote = replicatedStorage:WaitForChild("Remote"):WaitForChild("SellItemRemoteFunction")

-- Variabel
local autoFish = false
local fishing = false
local minigameConnection = nil
local isMouseDown = false
local autoSell = false
local sellTime = 10
local sellWeight = "All under 100 Kg"
local antiAfkEnabled = false
local lastFishingActionTime = 0

-- Fungsi Input Fishing
local function pressDown()
Â  Â  if not isMouseDown then
Â  Â  Â  Â  isMouseDown = true
Â  Â  Â  Â  virtualInputManager:SendMouseButtonEvent(0, 0, 0, true, game, 1)
Â  Â  end
end

local function release()
Â  Â  if isMouseDown then
Â  Â  Â  Â  isMouseDown = false
Â  Â  Â  Â  virtualInputManager:SendMouseButtonEvent(0, 0, 0, false, game, 1)
Â  Â  end
end

-- [BARU] Fungsi untuk mencari pancingan apapun
local function findBestRod()
Â  Â  if player.Character then
Â  Â  Â  Â  for _, item in ipairs(player.Character:GetChildren()) do
Â  Â  Â  Â  Â  Â  if item:IsA("Tool") and item.Name:match("Rod") then
Â  Â  Â  Â  Â  Â  Â  Â  return item
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  end
Â  Â  end
Â  Â  if player.Backpack then
Â  Â  Â  Â  for _, item in ipairs(player.Backpack:GetChildren()) do
Â  Â  Â  Â  Â  Â  if item:IsA("Tool") and item.Name:match("Rod") then
Â  Â  Â  Â  Â  Â  Â  Â  return item
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  end
Â  Â  end
Â  Â  return nil
end

-- Fungsi Anti AFK
local function startAntiAfk()
Â  Â  task.spawn(function()
Â  Â  Â  Â  while antiAfkEnabled do
Â  Â  Â  Â  Â  Â  task.wait(60)
Â  Â  Â  Â  Â  Â  if antiAfkEnabled and player.Character and player.Character:FindFirstChild("Humanoid") then
Â  Â  Â  Â  Â  Â  Â  Â  pcall(function() player.Character.Humanoid.Jump = true end)
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  end
Â  Â  end)
end

-- Fungsi Auto Sell
local function startAutoSell()
Â  Â  task.spawn(function()
Â  Â  Â  Â  while autoSell do
Â  Â  Â  Â  Â  Â  pcall(function() sellRemote:InvokeServer("SellFish", sellWeight) end)
Â  Â  Â  Â  Â  Â  CustomUI:Notify({Title="Auto Sell", Content="Menjual "..sellWeight, Duration=3})
Â  Â  Â  Â  Â  Â  task.wait(sellTime)
Â  Â  Â  Â  end
Â  Â  end)
end

-- Listener Fishing Minigame
rodEvent.OnClientEvent:Connect(function(action, rod)
Â  Â  -- [FIXED] Diubah dari "Reeling" ke "Zoom" berdasarkan log event baru
Â  Â  if not autoFish or action ~= "Zoom" then return end 
Â  Â  lastFishingActionTime = tick()
Â  Â  if minigameConnection then minigameConnection:Disconnect() end
Â  Â  isMouseDown = false

Â  Â  task.delay(12, function() -- Waktu ditambah sedikit untuk keamanan
Â  Â  Â  Â  if not autoFish then return end
Â  Â  Â  Â  if minigameConnection then
Â  Â  Â  Â  Â  Â  minigameConnection:Disconnect()
Â  Â  Â  Â  Â  Â  minigameConnection = nil
Â  Â  Â  Â  end
Â  Â  Â  Â  release()
Â  Â  Â  Â  fishing = false
Â  Â  end)

Â  Â  local reelingGui = player.PlayerGui:FindFirstChild("Reeling")
Â  Â  if reelingGui then
Â  Â  Â  Â  local whiteBar = reelingGui:FindFirstChild("WhiteBar", true)
Â  Â  Â  Â  local redBar = reelingGui:FindFirstChild("RedBar", true)

Â  Â  Â  Â  if whiteBar and redBar then
Â  Â  Â  Â  Â  Â  minigameConnection = runService.Heartbeat:Connect(function()
Â  Â  Â  Â  Â  Â  Â  Â  if not autoFish then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if minigameConnection then minigameConnection:Disconnect() end
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  Â  Â  local redCenter = redBar.AbsolutePosition.X + (redBar.AbsoluteSize.X / 2)
Â  Â  Â  Â  Â  Â  Â  Â  local whiteCenter = whiteBar.AbsolutePosition.X + (whiteBar.AbsoluteSize.X / 2)
Â  Â  Â  Â  Â  Â  Â  Â  local error = redCenter - whiteCenter
Â  Â  Â  Â  Â  Â  Â  Â  local tolerance = 2

Â  Â  Â  Â  Â  Â  Â  Â  if error > tolerance then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pressDown()
Â  Â  Â  Â  Â  Â  Â  Â  elseif error < 0 then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  release()
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  end)
Â  Â  Â  Â  end
Â  Â  end
end)

-- Fungsi Start Fishing
local function startFishing()
Â  Â  task.spawn(function()
Â  Â  Â  Â  while autoFish do
Â  Â  Â  Â  Â  Â  if not fishing then
Â  Â  Â  Â  Â  Â  Â  Â  local rod = findBestRod()
Â  Â  Â  Â  Â  Â  Â  Â  if rod then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fishing = true
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rodEvent:FireServer("Equipped", rod)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  task.wait(0.5)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rodEvent:FireServer("Throw", rod, workspace.Terrain)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lastFishingActionTime = tick()
Â  Â  Â  Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  CustomUI:Notify({Title="Error", Content="Pancingan tidak ditemukan!", Duration=5})
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  autoFish = false
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  task.wait(1)
Â  Â  Â  Â  end
Â  Â  end)
end

-- [BARU] Watchdog yang disempurnakan untuk mengatasi semua masalah macet
task.spawn(function()
Â  Â  local CAST_TIMEOUT = 20
Â  Â  local REELING_TIMEOUT = 25
Â  Â  while task.wait(3) do
Â  Â  Â  Â  if autoFish and fishing then
Â  Â  Â  Â  Â  Â  local isReelingGui = player.PlayerGui:FindFirstChild("Reeling")
Â  Â  Â  Â  Â  Â  local timeout = isReelingGui and REELING_TIMEOUT or CAST_TIMEOUT

Â  Â  Â  Â  Â  Â  if (tick() - lastFishingActionTime > timeout) then
Â  Â  Â  Â  Â  Â  Â  Â  if isReelingGui then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  CustomUI:Notify({Title="Auto Fish", Content="Reeling macet, mereset...", Duration=3})
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pcall(function() isReelingGui:Destroy() end)
Â  Â  Â  Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  CustomUI:Notify({Title="Auto Fish", Content="Tidak ada ikan, melempar ulang...", Duration=3})
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  fishing = false
Â  Â  Â  Â  Â  Â  Â  Â  release()
Â  Â  Â  Â  Â  Â  Â  Â  if minigameConnection then minigameConnection:Disconnect(); minigameConnection = nil end
Â  Â  Â  Â  Â  Â  Â  Â  lastFishingActionTime = tick()
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  end
Â  Â  end
end)


--==============================================================================
-- ( END ) LOGIKA INTI DARI PROJECT INDO HANGOUT
--==============================================================================


--==============================================================================
-- Eksekusi Utama
--==============================================================================

-- Tampilkan Loading Screen
local loadingScreen = CreateLoadingScreen()
task.wait(2) -- Simulasi waktu loading
SmoothTween(loadingScreen:FindFirstChild("Frame"), {BackgroundTransparency=1}, 0.5)
task.wait(0.5)
loadingScreen:Destroy()

-- Buat Window UI utama
local Window, WindowGui = CustomUI:CreateWindow({Â 
Â  Â  Name = "Indo Hangout Hub"
})

-- Tampilkan Sistem Kunci, dan jika berhasil, tampilkan UI
CreateKeySystem(function()
Â  Â  Window:Show()
Â  Â  CustomUI:Notify({
Â  Â  Â  Â  Title = "Welcome!",
Â  Â  Â  Â  Content = "Indo Hangout Hub Loaded!\nPress RightControl to toggle UI",
Â  Â  Â  Â  Duration = 5
Â  Â  })
end)

--==============================================================================
-- Implementasi UI Untuk Indo Hangout & Settings
--==============================================================================

-- Tab: Indo Hangout
local MainTab = Window:CreateTab("Indo Hangout")

-- Section: Auto Fish
MainTab:CreateSection("ğŸŸ Auto Fishing")

MainTab:CreateToggle({
Â  Â  Name = "Auto Fish Indo Hangout",
Â  Â  CurrentValue = false,
Â  Â  Callback = function(state)
Â  Â  Â  Â  autoFish = state
Â  Â  Â  Â  if state then
Â  Â  Â  Â  Â  Â  startFishing()
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  fishing = false
Â  Â  Â  Â  Â  Â  release()
Â  Â  Â  Â  Â  Â  if minigameConnection then
Â  Â  Â  Â  Â  Â  Â  Â  minigameConnection:Disconnect()
Â  Â  Â  Â  Â  Â  Â  Â  minigameConnection = nil
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  end
Â  Â  end
})

MainTab:CreateToggle({
Â  Â  Name = "Anti AFK",
Â  Â  CurrentValue = false,
Â  Â  Callback = function(state)
Â  Â  Â  Â  antiAfkEnabled = state
Â  Â  Â  Â  if state then startAntiAfk() end
Â  Â  Â  Â  CustomUI:Notify({Title="Anti AFK", Content="Anti AFK " .. (state and "diaktifkan" or "dinonaktifkan"), Duration=3})
Â  Â  end
})

MainTab:CreateDivider()

-- Section: Auto Sell
MainTab:CreateSection("ğŸ’° Auto Sell")

MainTab:CreateToggle({
Â  Â  Name = "Auto Sell",
Â  Â  CurrentValue = false,
Â  Â  Callback = function(state)
Â  Â  Â  Â  autoSell = state
Â  Â  Â  Â  if state then
Â  Â  Â  Â  Â  Â  startAutoSell()
Â  Â  Â  Â  end
Â  Â  end
})

MainTab:CreateSlider({
Â  Â  Name = "Set Time (detik)",
Â  Â  Range = {5, 60},
Â  Â  Increment = 1,
Â  Â  CurrentValue = 10,
Â  Â  Suffix = "s",
Â  Â  Callback = function(val)
Â  Â  Â  Â  sellTime = val
Â  Â  end
})

MainTab:CreateDropdown({
Â  Â  Name = "Pilih Berat",
Â  Â  Options = {"All under 50 Kg", "All under 100 Kg", "All under 400 Kg", "All under 600 Kg", "All under 800 Kg", "All under 1000 Kg"},
Â  Â  CurrentOption = {"All under 100 Kg"},
Â  Â  Callback = function(opt)
Â  Â  Â  Â  sellWeight = opt[1]
Â  Â  end
})

MainTab:CreateDivider()

-- Section: Teleport
MainTab:CreateSection("ğŸš€ Teleport")

local selectedPlayer = nil

local function refreshPlayerList()
Â  Â  local list = {}
Â  Â  for _, plr in ipairs(players:GetPlayers()) do
Â  Â  Â  Â  if plr ~= player then
Â  Â  Â  Â  Â  Â  table.insert(list, plr.Name)
Â  Â  Â  Â  end
Â  Â  end
Â  Â  return list
end

local playerDropdown = MainTab:CreateDropdown({
Â  Â  Name = "Pilih Player",
Â  Â  Options = refreshPlayerList(),
Â  Â  CurrentOption = {},
Â  Â  Callback = function(opt)
Â  Â  Â  Â  selectedPlayer = opt[1]
Â  Â  end
})

MainTab:CreateButton({
Â  Â  Name = "Refresh List Player",
Â  Â  Callback = function()
Â  Â  Â  Â  playerDropdown:Set(refreshPlayerList())
Â  Â  Â  Â  CustomUI:Notify({Title="Player List", Content="Daftar pemain diperbarui!", Duration=2})
Â  Â  end
})

MainTab:CreateButton({
Â  Â  Name = "Teleport ke Player",
Â  Â  Callback = function()
Â  Â  Â  Â  if selectedPlayer then
Â  Â  Â  Â  Â  Â  local target = players:FindFirstChild(selectedPlayer)
Â  Â  Â  Â  Â  Â  if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
Â  Â  Â  Â  Â  Â  Â  Â  player.Character:MoveTo(target.Character.HumanoidRootPart.Position + Vector3.new(2,0,2))
Â  Â  Â  Â  Â  Â  Â  Â  CustomUI:Notify({Title="Teleport", Content="Teleport ke "..selectedPlayer, Duration=3})
Â  Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  Â  Â  CustomUI:Notify({Title="Error", Content="Player tidak valid atau sudah keluar!", Duration=3})
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  CustomUI:Notify({Title="Error", Content="Pilih player dulu!", Duration=3})
Â  Â  Â  Â  end
Â  Â  end
})

-- Tab: Settings
local SettingsTab = Window:CreateTab("Settings")

SettingsTab:CreateSection("ğŸ¨ Theme Settings")
SettingsTab:CreateLabel("Select your preferred theme:")
for _, themeName in ipairs({"Default", "Dark", "Light", "Purple"}) do
Â  Â  SettingsTab:CreateButton({ Name = themeName .. " Theme", Callback = function() Window:ChangeTheme(themeName) end})
end
SettingsTab:CreateDivider()
SettingsTab:CreateSection("âŒ¨ï¸ Keybind Settings")
SettingsTab:CreateLabel("Set your preferred keybind for toggling UI:")
SettingsTab:CreateKeybind({ Name = "Toggle UI Keybind", CurrentKeybind = ToggleUIKeybind, Callback = function(key) Window:SetToggleKeybind(key) end})
SettingsTab:CreateDivider()

-- Kembalikan tabel library agar bisa diakses dari skrip lain jika diperlukan
return CustomUI

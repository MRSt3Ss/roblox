-- Bons GUI Stabil v3
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Hapus GUI lama
if PlayerGui:FindFirstChild("BonsGUI") then
    PlayerGui.BonsGUI:Destroy()
end

-- Utils
local function create(class, props, parent)
    local obj = Instance.new(class)
    if props then
        for k,v in pairs(props) do
            obj[k] = v
        end
    end
    if parent then obj.Parent = parent end
    return obj
end

-- Main ScreenGui
local sg = create("ScreenGui", {Parent = PlayerGui, Name = "BonsGUI", ResetOnSpawn = false})

-- Main Frame
local main = create("Frame", {
    Size = UDim2.new(0, 300, 0, 400),
    Position = UDim2.new(0.35,0,0.2,0),
    BackgroundColor3 = Color3.fromRGB(40,40,40)
}, sg)
create("UICorner", {CornerRadius = UDim.new(0,10)}, main)

-- Header
local header = create("Frame", {
    Size = UDim2.new(1,0,0,40),
    BackgroundColor3 = Color3.fromRGB(70,70,70),
    Parent = main
})
create("UICorner", {CornerRadius=UDim.new(0,10)}, header)

local title = create("TextLabel", {
    Text = "Bons GUI v3",
    BackgroundTransparency = 1,
    TextSize = 16,
    TextColor3 = Color3.fromRGB(255,200,150),
    Font = Enum.Font.GothamBold,
    Size = UDim2.new(1,0,1,0)
}, header)

local btnClose = create("TextButton", {
    Text = "X",
    Size = UDim2.new(0,30,0,30),
    Position = UDim2.new(1,-35,0,5),
    BackgroundColor3 = Color3.fromRGB(200,50,50),
    TextColor3 = Color3.new(1,1,1),
    Font = Enum.Font.GothamBold,
    TextSize = 16,
}, header)
create("UICorner", {CornerRadius=UDim.new(0,5)}, btnClose)
btnClose.MouseButton1Click:Connect(function() sg:Destroy() end)

-- Dragging
do
    local dragging=false; local dragStart; local startPos
    header.InputBegan:Connect(function(input)
        if input.UserInputType==Enum.UserInputType.MouseButton1 then
            dragging=true
            dragStart = input.Position
            startPos = main.Position
            input.Changed:Connect(function()
                if input.UserInputState==Enum.UserInputState.End then dragging=false end
            end)
        end
    end)
    header.InputChanged:Connect(function(input)
        if dragging and input.UserInputType==Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
end

-- Body
local body = create("Frame", {
    Position = UDim2.new(0,0,0,40),
    Size = UDim2.new(1,0,1,-40),
    BackgroundTransparency = 1,
    Parent = main
})

-- Info Label
local infoLabel = create("TextLabel", {
    Text = "GUI berhasil muncul!",
    BackgroundTransparency = 1,
    TextColor3 = Color3.fromRGB(200,200,200),
    Font = Enum.Font.Gotham,
    TextSize = 14,
    Size = UDim2.new(1,0,0,30),
    Position = UDim2.new(0,0,0,10),
    Parent = body
})

-- Test Button
local testBtn = create("TextButton", {
    Text = "Test Notif",
    Size = UDim2.new(0,120,0,30),
    Position = UDim2.new(0.5,-60,0,60),
    BackgroundColor3 = Color3.fromRGB(60,150,60),
    TextColor3 = Color3.new(1,1,1),
    Font = Enum.Font.GothamBold,
    TextSize = 14,
    Parent = body
})
create("UICorner", {CornerRadius=UDim.new(0,5)}, testBtn)

testBtn.MouseButton1Click:Connect(function()
    infoLabel.Text = "Notifikasi test berhasil!"
end)
